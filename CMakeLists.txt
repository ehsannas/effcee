cmake_minimum_required(VERSION 2.8.12)
project(effcee C CXX)
enable_testing()

option(EFFCEE_SKIP_TESTS "Skip building tests" ${EFFCEE_SKIP_TESTS})
if(NOT ${EFFCEE_SKIP_TESTS})
  set(EFFCEE_ENABLE_TESTS ON)
endif()
if(${EFFCEE_ENABLE_TESTS})
  message(STATUS "Configuring Effcee to build tests.")
else()
  message(STATUS "Configuring Effcee to avoid building tests.")
endif()

include(cmake/setup_build.cmake)
include(cmake/utils.cmake)

add_subdirectory(third_party)
add_subdirectory(effcee)

# Building examples requires gmock. Only include it if tests are enabled.
if(${EFFCEE_ENABLE_TESTS})
  add_subdirectory(examples)
endif()